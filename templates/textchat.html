{% extends "base.html" %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/textchat.css') }}">
{% endblock %}

{% block content %}
<div class="section-box">
  <!-- Arrow pinned left -->
  <a href="{{ url_for('messages') }}" class="btn btn-link p-0 back-arrow">
    <i class="fa-solid fa-arrow-left"></i>
  </a>

  <!-- Centered group -->
  <div class="text-pfp-container">
    <img src="{{ url_for('static', filename=(contact.image_url if contact.image_url else 'images/default_pfp.jpg')) }}"
         alt="{{ contact.name }} picture" class="pfp">
    <span class="contact-name fw-semibold">{{ contact.name }}</span>
  </div>
</div>

<h2>Chat Room</h2>

<form action="{{ url_for('textchat', contact_id=contact.id) }}" method="POST">
  <input type="text" name="username" placeholder="Your name" required>
  <input type="text" name="content" placeholder="Type a message..." required>
  <button type="submit">Send</button>
</form>

<hr>

<ul>
  {% for msg in messages %}
    <li>
      <strong>{{ msg.username }}</strong>: {{ msg.content }}
      <em>({{ msg.timestamp.strftime("%Y-%m-%d %H:%M") }})</em>
    </li>
  {% endfor %}
</ul>
{% endblock %}